#!/bin/bash

# TimeMeUp Development Setup Script
# Run this script to set up the development environment

set -e

echo "ğŸš€ Setting up TimeMeUp development environment..."

# Check if Homebrew is installed
if ! command -v brew >/dev/null 2>&1; then
    echo "âŒ Homebrew is required but not installed."
    echo "   Install from: https://brew.sh"
    exit 1
fi

echo "âœ… Homebrew found"

# Install SwiftFormat
if ! command -v swiftformat >/dev/null 2>&1; then
    echo "ğŸ“¦ Installing SwiftFormat..."
    brew install swiftformat
    echo "âœ… SwiftFormat installed"
else
    echo "âœ… SwiftFormat already installed"
fi

# Install SwiftLint
if ! command -v swiftlint >/dev/null 2>&1; then
    echo "ğŸ“¦ Installing SwiftLint..."
    brew install swiftlint
    echo "âœ… SwiftLint installed"
else
    echo "âœ… SwiftLint already installed"
fi

# Check Swift version
echo "ğŸ” Checking Swift version..."
swift --version

# Verify tools work
echo "ğŸ§ª Testing tools..."
swiftformat --version
swiftlint version

echo ""
echo "ğŸ‰ Development environment setup complete!"
echo ""
echo "ğŸ“ Available commands:"
echo "   ./setup     - Run this setup script"
echo "   ./build     - Build app with code quality checks"
echo "   swift run   - Quick development build"
echo ""
echo "ğŸ”§ Code quality tools:"
echo "   swiftformat .      - Format all Swift files"
echo "   swiftlint          - Check code quality"
echo "   swiftlint --fix    - Auto-fix issues"
echo ""
echo "ğŸ“‹ Configuration files:"
echo "   .swiftformat       - Formatting rules"
echo "   .swiftlint.yml     - Linting rules"
echo ""
